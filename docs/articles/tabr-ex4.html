<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Example: Gin Wigmore - Devil in me • tabr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Example: Gin Wigmore - Devil in me">
<meta property="og:description" content="">
<meta property="og:image" content="https://leonawicz.github.io/tabr/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tabr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-info-circle"></span>
     
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Programming</li>
    <li>
      <a href="../articles/tabr-prog-nw.html">Noteworthiness</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-scales.html">Musical scales</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-notes.html">Note functions</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-chords.html">Chord functions</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-noteinfo.html">Time and note info</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-music.html">The music class</a>
    </li>
    <li>
      <a href="../articles/tabr-prog-converters.html">Syntax converters</a>
    </li>
    <li>
      <a href="../articles/tabr-fretboard.html">Fretboard diagram plots</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Transcription</li>
    <li>
      <a href="../articles/tabr-basics.html">Basic overview</a>
    </li>
    <li>
      <a href="../articles/tabr-phrases.html">Musical phrases</a>
    </li>
    <li>
      <a href="../articles/tabr-helpers.html">Phrase helpers</a>
    </li>
    <li>
      <a href="../articles/tabr-chords.html">Chords</a>
    </li>
    <li>
      <a href="../articles/tabr-repeats.html">Repeats</a>
    </li>
    <li>
      <a href="../articles/tabr-tracks-scores.html">Tracks and scores</a>
    </li>
    <li>
      <a href="../articles/tabr-engraving.html">Render scores</a>
    </li>
    <li>
      <a href="../articles/tabr-chordchart.html">Render chord chart</a>
    </li>
    <li>
      <a href="../articles/tabr-tunings.html">Strings and tunings</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/tabr-ex1.html">Tuning and capo</a>
    </li>
    <li>
      <a href="../articles/tabr-ex2.html">Multiple voices</a>
    </li>
    <li>
      <a href="../articles/tabr-ex3.html">AC2 - Ezio's family</a>
    </li>
    <li>
      <a href="../articles/tabr-ex4.html">Gin Wigmore - Devil in me</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-book"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/leonawicz/tabr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Example: Gin Wigmore - Devil in me</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/leonawicz/tabr/blob/master/vignettes/tabr-ex4.Rmd"><code>vignettes/tabr-ex4.Rmd</code></a></small>
      <div class="hidden name"><code>tabr-ex4.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>This coding example demonstrates the creation of a complete arrangement of <a href="https://www.youtube.com/watch?v=cC04hkIVrYs">Devil in me</a> by <a href="https://en.wikipedia.org/wiki/Gin_Wigmore">Gin Wigmore</a>, whose music was one of the original inspirations for writing the sheet music transcription code in <code>tabr</code>. This custom arrangement written in R code is for educational purposes.</p>
<div style="text-align:center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/cC04hkIVrYs" frameborder="0" allowfullscreen>
</iframe>
</div>
<p>While I enjoy playing Gin Wigmore’s music on guitar, it was frustrating to not be able to find quality guitar tablature for reference. Of course, this is the case for the vast majority of music. Having tabs would have helped me figure out guitar parts that I found challenging to hear clearly when layered with other instruments and vocals. In the end, I had no recourse but to do my best at figuring out each guitar track by ear. It’s not perfect, nor does this custom arrangement need to be exactly like the recording, but it’s pretty close. And now I can reproduce the arrangement with code.</p>
<p>This tutorial shows use of both the <code>phrase</code> class and the <code>music</code> class for entering the notes and chords and building up the score.</p>
</div>
<div id="setup" class="section level2">
<h2 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h2>
<p>First, enter some score metadata.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">hdr &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="dt">title =</span> <span class="st">"Devil in me"</span>,</a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="dt">composer =</span> <span class="st">"Words and music by Gin Wigmore"</span>,</a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="dt">performer =</span> <span class="st">"Gin Wigmore"</span>,</a>
<a class="sourceLine" id="cb1-5" title="5">  <span class="dt">album =</span> <span class="st">"Gravel and Wine"</span>,</a>
<a class="sourceLine" id="cb1-6" title="6">  <span class="dt">subtitle =</span> <span class="st">"From the album Gravel and Wine by Gin Wigmore"</span>,</a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="dt">arranger =</span> <span class="st">"Arranged by Matthew Leonawicz"</span>,</a>
<a class="sourceLine" id="cb1-8" title="8">  <span class="dt">copyright =</span> <span class="st">"2011 Island Records"</span>,</a>
<a class="sourceLine" id="cb1-9" title="9">  <span class="dt">tagline =</span> <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="st">"Arranged by Matthew Leonawicz"</span>, <span class="kw"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span>())</a>
<a class="sourceLine" id="cb1-10" title="10">)</a>
<a class="sourceLine" id="cb1-11" title="11"></a>
<a class="sourceLine" id="cb1-12" title="12">out &lt;-<span class="st"> "gin_wigmore-devil_in_me-custom_arrangement.pdf"</span></a></code></pre></div>
<p>Define some guitar chords with specific shapes and positions on the guitar neck that will be used several times.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">d1 &lt;-<span class="st"> "dad'f'"</span></a>
<a class="sourceLine" id="cb2-2" title="2">f1 &lt;-<span class="st"> "f,cfac'f'"</span></a>
<a class="sourceLine" id="cb2-3" title="3">g1 &lt;-<span class="st"> "g,dgb_d'g'"</span></a>
<a class="sourceLine" id="cb2-4" title="4">a1 &lt;-<span class="st"> "a,eac#'e'"</span></a>
<a class="sourceLine" id="cb2-5" title="5">b_<span class="dv">1</span> &lt;-<span class="st"> "b_,fb_d'f'"</span></a>
<a class="sourceLine" id="cb2-6" title="6">c1 &lt;-<span class="st"> "cegc'e'"</span></a>
<a class="sourceLine" id="cb2-7" title="7">b_<span class="dv">2</span> &lt;-<span class="st"> "b_d'f'b_'"</span></a>
<a class="sourceLine" id="cb2-8" title="8">c2 &lt;-<span class="st"> "c'e'g'c''"</span></a>
<a class="sourceLine" id="cb2-9" title="9">f2 &lt;-<span class="st"> "c'f'a'c''"</span></a>
<a class="sourceLine" id="cb2-10" title="10">d2 &lt;-<span class="st"> "d'f'a'"</span></a>
<a class="sourceLine" id="cb2-11" title="11">f3 &lt;-<span class="st"> "c'f'a'"</span></a>
<a class="sourceLine" id="cb2-12" title="12">g2 &lt;-<span class="st"> "d'g'b_'"</span></a></code></pre></div>
</div>
<div id="chord-chart-and-chord-symbols-above-staff" class="section level2">
<h2 class="hasAnchor">
<a href="#chord-chart-and-chord-symbols-above-staff" class="anchor"></a>Chord chart and chord symbols above staff</h2>
<p>Next provide the code for fretboard diagrams that will compose the chord chart at the top of the first page of the sheet music. This requires fretted strings and chord symbols to identify each chord.</p>
<p>Here is the code for defining the chord chart.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">chord_names &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"d:m"</span>, <span class="st">"f"</span>, <span class="st">"g:m"</span>, <span class="st">"a"</span>, <span class="st">"b_"</span>, <span class="st">"c"</span>, <span class="st">"s"</span>, <span class="st">"b_"</span>, <span class="st">"c"</span>, <span class="st">"f"</span>, <span class="st">"d:m"</span>, <span class="st">"f/c"</span>, <span class="st">"g:m/d"</span>)</a>
<a class="sourceLine" id="cb3-2" title="2">chord_positions &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"o231"</span>, <span class="st">"133211"</span>, <span class="st">"355333"</span>, <span class="st">"o222o"</span>, <span class="st">"13331"</span>, <span class="st">"32o1o"</span>,</a>
<a class="sourceLine" id="cb3-3" title="3">                     <span class="ot">NA</span>, <span class="st">"8766"</span>, <span class="st">"10 9 8 8"</span>, <span class="st">"10 10 10 8"</span>, <span class="st">"765"</span>, <span class="st">"565"</span>, <span class="st">"786"</span>)</a>
<a class="sourceLine" id="cb3-4" title="4">chords &lt;-<span class="st"> </span><span class="kw"><a href="../reference/chord_set.html">chord_set</a></span>(chord_positions, chord_names)</a></code></pre></div>
<p>If you are wondering, the <code>NA</code> is because there is no value for the silent rest <code>s</code>. This is not important here but used below to indicate measures where no chord symbol is to be shown.</p>
<p>That chord chart is pretty easy. The more cumbersome step is laying out chord symbols above the staff through time from measure to measure. For this, you need to know how you plan to annotate the staff at measure, while also accounting for any use of volta repeat sections, which effectively reduce the number of measures that display in the sheet music compared to how many really exist.</p>
<p>Here is the code for defining the chord sequence.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">intro &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span>), <span class="dt">each =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb4-2" title="2">verse &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">each =</span> <span class="dv">2</span>), <span class="dv">2</span>), <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dt">each =</span> <span class="dv">2</span>), <span class="dv">3</span>, <span class="dv">4</span>),</a>
<a class="sourceLine" id="cb4-4" title="4">  <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">each =</span> <span class="dv">2</span>), <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dt">each =</span> <span class="dv">2</span>), <span class="dv">3</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb4-5" title="5">)</a>
<a class="sourceLine" id="cb4-6" title="6">chorus &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">5</span><span class="op">:</span><span class="dv">6</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">1</span>, <span class="dv">5</span><span class="op">:</span><span class="dv">6</span>)</a>
<a class="sourceLine" id="cb4-7" title="7">interlude &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dt">each =</span> <span class="dv">2</span>), <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">4</span>), <span class="dt">each =</span> <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb4-8" title="8">ending &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">7</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb4-9" title="9">name_seq &lt;-<span class="st"> </span>chord_names[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(intro, verse[[<span class="dv">1</span>]], chorus, interlude[[<span class="dv">1</span>]],</a>
<a class="sourceLine" id="cb4-10" title="10">                          verse[[<span class="dv">2</span>]], chorus, interlude[[<span class="dv">2</span>]], chorus, ending)]</a>
<a class="sourceLine" id="cb4-11" title="11">measures &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(intro, <span class="kw"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(verse), <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(chorus, <span class="dv">3</span>), <span class="kw"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(interlude), ending))</a>
<a class="sourceLine" id="cb4-12" title="12">chord_seq &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="dv">1</span>, <span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(name_seq)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/setNames.html">setNames</a></span>(name_seq)</a></code></pre></div>
</div>
<div id="guitar-1-melody-and-lead" class="section level2">
<h2 class="hasAnchor">
<a href="#guitar-1-melody-and-lead" class="anchor"></a>Guitar 1: melody and lead</h2>
<p>Now things get more interesting. It is time to to write code for the main guitar. This is the main melody. It includes the lead guitar bits and the guitar solo. Since this track will display in the tablature output as the first staff, use this one for including some text annotations.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">txt &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Guitar 1 w/ tremolo. Guitars 3 and 4 rhythm figures played during intro."</span>,</a>
<a class="sourceLine" id="cb5-2" title="2">         <span class="st">"Add guitar 3 intro rhythm figure during intro lead repeat."</span>,</a>
<a class="sourceLine" id="cb5-3" title="3">         <span class="st">"Add guitar 4 intro rhythm figure until chorus."</span>,</a>
<a class="sourceLine" id="cb5-4" title="4">         <span class="st">"Guitar solo. Add guitar 3 during solo."</span>)</a></code></pre></div>
<p>Putting the pieces together, I have done this using several phrases below.</p>
<p>Notice that it is much easier to add annotations using <code>as_music</code>, which takes <code>labels</code> and <code>at</code> arguments. Also, when using <code>phrase</code> directly (actually the alias <code>p</code>), the notation is still provided in the same efficient single-string syntax used by the <code>music</code> class. If you provide this syntax, <code>phrase</code> will recognize it and treat it the same as if you had already created a music object with <code>as_music</code>. You can also concatenate both classes together, resulting in a new phrase object.</p>
<p>The last step is to concatenate all these phrases in the proper order for the full track.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">p1 &lt;-<span class="st"> </span>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span>(txt[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>], <span class="op">~</span><span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="kw"><a href="../reference/music.html">as_music</a></span>(<span class="st">"r4;5 a,8 c f;4 d a;3 f;4 b~16^;3 b~ b2..^"</span>, <span class="dt">labels =</span> .x)))</a>
<a class="sourceLine" id="cb6-2" title="2">p2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="st">"r4;4 a8 c';3 d' a;4 f';2 d';3 g'~16^;2 g'~ g'2.^"</span>)</a>
<a class="sourceLine" id="cb6-3" title="3">p2b &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span>(<span class="st">"</span><span class="ch">\\</span><span class="st">."</span>, <span class="st">"</span><span class="ch">\\</span><span class="st">.</span><span class="ch">\\</span><span class="st">."</span>, p2)</a>
<a class="sourceLine" id="cb6-4" title="4">p3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="st">"f'8;2 g'2 a8;4 c';3 d' f';2 d'~1;3 d'"</span>)</a>
<a class="sourceLine" id="cb6-5" title="5">p4 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="st">"r1;4*5 r4 g~2. g1 r4 d~2.;5 d1 r2.. c''16;1 c'' a'1;2 r r r4. f'2;3 d'~8 d'1 r2 r8 c''4;1 a'~8;2 a'1 r r"</span>)</a>
<a class="sourceLine" id="cb6-6" title="6">p5a &lt;-<span class="st"> </span><span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="kw"><a href="../reference/append_phrases.html">pc</a></span>(b_<span class="dv">2</span>, c2, f2, d2), <span class="dv">1</span>, <span class="st">"4*3 3"</span>)</a>
<a class="sourceLine" id="cb6-7" title="7">p5 &lt;-<span class="st"> </span>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="../reference/repeats.html">volta</a></span>(p5a, .x), <span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="kw"><a href="../reference/append_phrases.html">pc</a></span>(b_<span class="dv">2</span>, c2), <span class="dv">1</span>, <span class="dv">4</span>)))</a>
<a class="sourceLine" id="cb6-8" title="8">p6 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(</a>
<a class="sourceLine" id="cb6-9" title="9">  <span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="st">"r4.;3 f'4 d' f'~8 f'1 r2 r8 a'c''4.;2 a'1 r2. d''g''~4 d''g''1 r4. a'8 f'4;3 d' a1;4"</span>),</a>
<a class="sourceLine" id="cb6-10" title="10">  <span class="kw"><a href="../reference/music.html">as_music</a></span>(<span class="st">"r4 a'c''4.;2 c''4;1 a'8;2 f'1;3 r4 d''g''2.;2 r1"</span>, <span class="dt">labels =</span> txt[<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb6-11" title="11">)</a>
<a class="sourceLine" id="cb6-12" title="12">p7 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="../reference/repeats.html">volta</a></span>(p5a, <span class="dv">2</span>), <span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="kw"><a href="../reference/append_phrases.html">pc</a></span>(b_<span class="dv">2</span>, <span class="kw"><a href="../reference/tie.html">tie</a></span>(c2), c2, d1), <span class="dv">1</span>, <span class="dv">4</span>))</a>
<a class="sourceLine" id="cb6-13" title="13"></a>
<a class="sourceLine" id="cb6-14" title="14">solo &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(</a>
<a class="sourceLine" id="cb6-15" title="15">  <span class="kw"><a href="../reference/music.html">as_music</a></span>(<span class="st">"d2.;5 c8 d~ d a, c d g-;4 a- g f~ f2- d'8;3 f'4;2 c''8;1 a'2 a4;3 f;4"</span>, <span class="dt">labels =</span> txt[<span class="dv">4</span>]),</a>
<a class="sourceLine" id="cb6-16" title="16">  <span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="st">"d2;5 d4 c8 d~ d a, c d g-;4 a- g f~ f2 r8 f';2*3 f'2 f'4 e'"</span>),</a>
<a class="sourceLine" id="cb6-17" title="17">  <span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="st">"d'2;3 d'4 c'8 d'~ d' f';2 a;4 c';3 d'4 c' b_2;4 b_4 c'8;3 d'~ d'2 a4 f;4"</span>),</a>
<a class="sourceLine" id="cb6-18" title="18">  <span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="st">"d2;5 d4 c8 d~ d a, c d g-;4 a- g a~;3 a2- e'a'16;3*4 e'a'e'';3*10 e'a'e''2 r8"</span>)</a>
<a class="sourceLine" id="cb6-19" title="19">)</a>
<a class="sourceLine" id="cb6-20" title="20"></a>
<a class="sourceLine" id="cb6-21" title="21">track1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/track.html">track</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(p1[[<span class="dv">1</span>]], p2, p3, p4, p5[[<span class="dv">1</span>]], p1[[<span class="dv">2</span>]], p2b, p6, p5[[<span class="dv">2</span>]], solo, p7))</a></code></pre></div>
</div>
<div id="guitar-2---4-rhythm" class="section level2">
<h2 class="hasAnchor">
<a href="#guitar-2---4-rhythm" class="anchor"></a>Guitar 2 - 4: rhythm</h2>
<p>The rhythm guitar section is much simpler, though to anyone not working on the transcription themselves, no less cryptic at a glance. However, in this case much of the reason it looks opaque is because there is more opportunity to save on typing by creating a simple function that will repeat patterns efficiently.</p>
<p>There are mainly two guitar parts. The lead above and this rhythm guitar here.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">f &lt;-<span class="st"> </span><span class="cf">function</span>(notes, strings, <span class="dt">n =</span> <span class="dv">1</span>) <span class="kw"><a href="../reference/repeats.html">pct</a></span>(<span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="kw"><a href="../reference/append_phrases.html">pn</a></span>(notes, <span class="dv">8</span>), <span class="st">"8 8x 8*3 8x 8 8"</span>, <span class="kw"><a href="../reference/append_phrases.html">pn</a></span>(strings, <span class="dv">8</span>)), n <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb7-2" title="2">p1a &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">f</span>(d1, <span class="dv">4</span>, <span class="dv">2</span>), <span class="kw">f</span>(f1, <span class="dv">6</span>, <span class="dv">2</span>), <span class="kw">f</span>(g1, <span class="dv">6</span>, <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb7-3" title="3">p1 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(p1a, <span class="kw">f</span>(d1, <span class="dv">4</span>), <span class="kw"><a href="../reference/phrase.html">p</a></span>(d1, <span class="st">"1-."</span>, <span class="dv">4</span>))</a>
<a class="sourceLine" id="cb7-4" title="4">p2 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(p1a, p1a, <span class="kw">f</span>(d1, <span class="dv">4</span>, <span class="dv">2</span>), <span class="kw">f</span>(f1, <span class="dv">6</span>, <span class="dv">2</span>), <span class="kw">f</span>(g1, <span class="dv">6</span>), <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="../reference/phrase.html">p</a></span>(a1, <span class="dv">8</span>, <span class="dv">5</span>), <span class="dv">8</span>))</a>
<a class="sourceLine" id="cb7-5" title="5">p3a &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">f</span>(b_<span class="dv">1</span>, <span class="dv">5</span>), <span class="kw">f</span>(c1, <span class="dv">5</span>), <span class="kw">f</span>(f1, <span class="dv">6</span>), <span class="kw">f</span>(d1, <span class="dv">6</span>))</a>
<a class="sourceLine" id="cb7-6" title="6">p3 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="../reference/repeats.html">volta</a></span>(p3a, <span class="dt">silent =</span> <span class="ot">TRUE</span>), <span class="kw">f</span>(b_<span class="dv">1</span>, <span class="dv">5</span>), <span class="kw"><a href="../reference/phrase.html">p</a></span>(c1, <span class="st">"1-."</span>, <span class="dv">5</span>), <span class="kw">f</span>(d1, <span class="dv">4</span>, <span class="dv">2</span>), <span class="kw">f</span>(f1, <span class="dv">6</span>), <span class="kw"><a href="../reference/phrase.html">p</a></span>(f1, <span class="st">"1-."</span>, <span class="dv">6</span>))</a>
<a class="sourceLine" id="cb7-7" title="7">p4 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">f</span>(d1, <span class="dv">4</span>, <span class="dv">2</span>), <span class="kw">f</span>(f1, <span class="dv">6</span>, <span class="dv">2</span>), <span class="kw">f</span>(g1, <span class="dv">6</span>, <span class="dv">2</span>), <span class="kw">f</span>(d1, <span class="dv">4</span>, <span class="dv">2</span>), <span class="kw">f</span>(f1, <span class="dv">6</span>, <span class="dv">2</span>), <span class="kw">f</span>(g1, <span class="dv">6</span>), <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="../reference/phrase.html">p</a></span>(a1, <span class="dv">8</span>, <span class="dv">5</span>), <span class="dv">8</span>))</a>
<a class="sourceLine" id="cb7-8" title="8">p5 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="../reference/repeats.html">volta</a></span>(p3a, <span class="dv">2</span>, <span class="dt">silent =</span> <span class="ot">TRUE</span>), <span class="kw">f</span>(b_<span class="dv">1</span>, <span class="dv">5</span>), <span class="kw"><a href="../reference/phrase.html">p</a></span>(c1, <span class="st">"1-."</span>, <span class="dv">5</span>))</a>
<a class="sourceLine" id="cb7-9" title="9">p6 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">f</span>(d1, <span class="dv">4</span>, <span class="dv">2</span>), <span class="kw">f</span>(f1, <span class="dv">6</span>, <span class="dv">2</span>)), <span class="dv">2</span>), <span class="kw">f</span>(d1, <span class="dv">4</span>, <span class="dv">2</span>), <span class="kw">f</span>(b_<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">2</span>), <span class="kw">f</span>(d1, <span class="dv">4</span>, <span class="dv">2</span>), <span class="kw">f</span>(a1, <span class="dv">5</span>, <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb7-10" title="10">p7 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="../reference/repeats.html">volta</a></span>(p3a, <span class="dv">2</span>, <span class="dt">silent =</span> <span class="ot">TRUE</span>), <span class="kw">f</span>(b_<span class="dv">1</span>, <span class="dv">5</span>), <span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="kw"><a href="../reference/append_phrases.html">pc</a></span>(c1, <span class="st">"r r"</span>), <span class="st">"1-. 1 1"</span>, <span class="dv">5</span>))</a>
<a class="sourceLine" id="cb7-11" title="11"></a>
<a class="sourceLine" id="cb7-12" title="12">track2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/track.html">track</a></span>(<span class="kw"><a href="../reference/append_phrases.html">pc</a></span>(p1, p2, p3, p4, p5, p6, p7))</a></code></pre></div>
<p>What I have chosen to call guitars 3 and 4 are actually pretty short pieces. I have arranged it this way to capture the few moments, mainly the opening, where it’s not just two guitars. It can take decent speakers to pick it apart. My ears did the best they could do.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">f &lt;-<span class="st"> </span><span class="cf">function</span>(notes, <span class="dt">n =</span> <span class="dv">1</span>) <span class="kw"><a href="../reference/repeats.html">pct</a></span>(<span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="kw"><a href="../reference/append_phrases.html">pc</a></span>(<span class="st">"r"</span>, notes, <span class="st">"r"</span>, notes, <span class="st">"r"</span>), <span class="st">"4 8-. 4 8-. 4"</span>, <span class="dv">3</span>), n <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb8-2" title="2">p1a &lt;-<span class="st"> </span><span class="kw"><a href="../reference/append_phrases.html">pc</a></span>(<span class="kw">f</span>(d2, <span class="dv">2</span>), <span class="kw">f</span>(f3, <span class="dv">2</span>), <span class="kw">f</span>(g2, <span class="dv">2</span>), <span class="kw">f</span>(d2), <span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="kw"><a href="../reference/append_phrases.html">pc</a></span>(d2, <span class="st">"r"</span>), <span class="st">"8-. 2.."</span>, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb8-3" title="3">p1b &lt;-<span class="st"> </span><span class="kw"><a href="../reference/append_phrases.html">pc</a></span>(<span class="kw">f</span>(d2, <span class="dv">2</span>), <span class="kw">f</span>(f3), <span class="kw">f</span>(f3))</a>
<a class="sourceLine" id="cb8-4" title="4">track3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/track.html">track</a></span>(p1a)</a>
<a class="sourceLine" id="cb8-5" title="5"></a>
<a class="sourceLine" id="cb8-6" title="6">f &lt;-<span class="st"> </span><span class="cf">function</span>(notes, <span class="dt">n =</span> <span class="dv">1</span>) <span class="kw"><a href="../reference/repeats.html">pct</a></span>(<span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="kw"><a href="../reference/append_phrases.html">pc</a></span>(notes, <span class="st">"r"</span>, notes, <span class="st">"r"</span>), <span class="st">"8-. 4 8-. 2"</span>, <span class="dv">5</span>), n <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb8-7" title="7">p1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/append_phrases.html">pc</a></span>(<span class="kw">f</span>(<span class="st">"da"</span>, <span class="dv">2</span>), <span class="kw">f</span>(<span class="st">"fc'"</span>, <span class="dv">2</span>), <span class="kw">f</span>(<span class="st">"gd'"</span>, <span class="dv">2</span>), <span class="kw">f</span>(<span class="st">"da"</span>, <span class="dv">1</span>), <span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="kw"><a href="../reference/append_phrases.html">pc</a></span>(<span class="st">"da r"</span>), <span class="st">"4 2."</span>, <span class="dv">5</span>))</a>
<a class="sourceLine" id="cb8-8" title="8">track4 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/track.html">track</a></span>(p1)</a></code></pre></div>
</div>
<div id="render-the-sheet-music" class="section level2">
<h2 class="hasAnchor">
<a href="#render-the-sheet-music" class="anchor"></a>Render the sheet music</h2>
<p>Now you can render the sheet music document by sending the score to LilyPond.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw"><a href="../reference/trackbind.html">trackbind</a></span>(track1, track2, track3, track4) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="st">  </span><span class="kw"><a href="../reference/score.html">score</a></span>(chords, chord_seq) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="st">  </span><span class="kw"><a href="../reference/tab.html">tab</a></span>(out, <span class="dt">key =</span> <span class="st">"dm"</span>, <span class="dt">tempo =</span> <span class="st">"4 = 120"</span>, <span class="dt">header =</span> hdr)</a></code></pre></div>
<p>There you have it! One of my favorites by one of my favorite musicians, transcribed with R code. Here is what page one looks like.</p>
<p>
<img src="https://github.com/leonawicz/tabr/blob/master/data-raw/vignette-pngs/ex4-devil-in-me-p1.png?raw=true" class="centerimg" width="100%"></p>
<p>There are limitations. For example, rendering string bending in the output is technically challenging in LilyPond itself and doing it right requires a bit of hacking there. For that reason, there is only so much effort on the R side to support code for string bending, especially not things like bend and release, or bend, release and pull off. Also, the poorly engraved bend notation is just being used as a stand in for vibrato anyway. I think it’s just vibrato in the song. But when I don’t have a tremolo bar, a little bending is good enough. Basically, just play those parts the way you want. Same goes for the rhythm pattern. There is no need to follow it exactly. However accurate parts are, they are still just a guide.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#overview">Overview</a></li>
      <li><a href="#setup">Setup</a></li>
      <li><a href="#chord-chart-and-chord-symbols-above-staff">Chord chart and chord symbols above staff</a></li>
      <li><a href="#guitar-1-melody-and-lead">Guitar 1: melody and lead</a></li>
      <li><a href="#guitar-2---4-rhythm">Guitar 2 - 4: rhythm</a></li>
      <li><a href="#render-the-sheet-music">Render the sheet music</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/leonawicz">Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
